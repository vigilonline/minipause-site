<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>2048 Mini — MiniPause</title>
<link rel="stylesheet" href="../assets/styles.css">
</head><body>
<div class="page">
  <p><a href="../index.html">← Back to Game Hub</a></p>
  <h1>2048 Mini</h1>
  <div class="pad"><div id="g" style="display:grid;grid-template-columns:repeat(4,70px);gap:8px"></div><div class="controls"><button id="new">New</button><span id="st"></span></div><p><small class="muted">Use arrow keys or swipe.</small></p></div>
  <p><small class="muted">Tip: Use fullscreen on mobile (rotate device for better play).</small></p>
</div>
<script>
let a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]; const g=document.getElementById('g'), st=document.getElementById('st');
function rnd(){ let z=a.map((v,i)=>[v,i]).filter(x=>!x[0]); if(!z.length) return; a[z[Math.random()*z.length|0][1]] = Math.random()<.9?2:4; }
function draw(){ g.innerHTML=''; a.forEach(v=>{ const d=document.createElement('div'); d.className='tile center'; d.style.width='70px'; d.style.height='70px'; d.style.fontWeight='900'; d.textContent=v||''; d.style.background=v?`hsl(${(Math.log2(v)%12)*30},70%,80%)`:'#e2e8f0'; g.appendChild(d); }); st.textContent = 'Score ~ '+a.reduce((s,v)=>s+v,0); }
function row(y){ return a.slice(y*4,y*4+4); } function setrow(y,r){ for(let i=0;i<4;i++) a[y*4+i]=r[i]; }
function col(x){ return [a[x],a[x+4],a[x+8],a[x+12]]; } function setcol(x,c){ [a[x],a[x+4],a[x+8],a[x+12]] = c; }
function merge(line){ line=line.filter(v=>v); for(let i=0;i<line.length-1;i++){ if(line[i]===line[i+1]){ line[i]*=2; line.splice(i+1,1); } } while(line.length<4) line.push(0); return line; }
function move(dir){
  let changed=false;
  if(dir==='L'){ for(let y=0;y<4;y++){ let r=merge(row(y)); if(String(r)!==String(row(y))){ setrow(y,r); changed=true; } } }
  if(dir==='R'){ for(let y=0;y<4;y++){ let r=merge(row(y).reverse()).reverse(); if(String(r)!==String(row(y))){ setrow(y,r); changed=true; } } }
  if(dir==='U'){ for(let x=0;x<4;x++){ let c=merge(col(x)); if(String(c)!==String(col(x))){ setcol(x,c); changed=true; } } }
  if(dir==='D'){ for(let x=0;x<4;x++){ let c=merge(col(x).reverse()).reverse(); if(String(c)!==String(col(x))){ setcol(x,c); changed=true; } } }
  if(changed){ rnd(); draw(); }
}
document.getElementById('new').onclick=()=>{ a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]; rnd(); rnd(); draw(); };
addEventListener('keydown',e=>{ ({ArrowLeft:'L',ArrowRight:'R',ArrowUp:'U',ArrowDown:'D'}[e.key]) && move({ArrowLeft:'L',ArrowRight:'R',ArrowUp:'U',ArrowDown:'D'}[e.key]); });
let sx,sy; document.body.addEventListener('touchstart',e=>{sx=e.touches[0].clientX; sy=e.touches[0].clientY;},{passive:true});
document.body.addEventListener('touchend',e=>{ if(sx==null) return; const dx=e.changedTouches[0].clientX-sx, dy=e.changedTouches[0].clientY-sy;
  if(Math.abs(dx)>Math.abs(dy)) move(dx>0?'R':'L'); else move(dy>0?'D':'U'); sx=sy=null; });
document.getElementById('new').click();
</script>
</body></html>