<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Flappy Square — MiniPause</title>
<link rel="stylesheet" href="../assets/styles.css">
</head><body>
<div class="page">
  <p><a href="../index.html">← Back to Game Hub</a></p>
  <h1>Flappy Square</h1>
  <div class="pad"><canvas id="cv" class="game" width="360" height="480"></canvas><div class="controls"><button id="st">Start</button><span id="s"></span></div></div>
  <p><small class="muted">Tip: Use fullscreen on mobile (rotate device for better play).</small></p>
</div>
<script>
const cv=document.getElementById('cv'), cx=cv.getContext('2d'); let y=200, v=0, g=0.5, playing=false, pipes=[], score=0;
function reset(){ y=200; v=0; score=0; pipes=[]; }
function draw(){ cx.fillStyle='#e2e8f0'; cx.fillRect(0,0,cv.width,cv.height); cx.fillStyle='#f59e0b'; cx.fillRect(40,y,24,24);
  cx.fillStyle='#94a3b8'; pipes.forEach(p=>{ cx.fillRect(p.x,0,40,p.top); cx.fillRect(p.x,p.bottom,40,cv.height-p.bottom);}); }
function step(){ if(!playing)return; v+=g; y+=v; if(y<0||y>cv.height-24) return gameOver();
  if(pipes.length===0||pipes[pipes.length-1].x<220){ const gap=120+Math.random()*40; const top=20+Math.random()*220; pipes.push({x:cv.width, top:top, bottom:top+gap}); }
  pipes.forEach(p=>p.x-=2); pipes=pipes.filter(p=>p.x>-50); pipes.forEach(p=>{ if(40+24>p.x && 40<p.x+40 && (y<p.top || y+24>p.bottom)) gameOver(); if(p.x===40) score++; });
  draw(); requestAnimationFrame(step); }
function gameOver(){ playing=false; document.getElementById('s').textContent='Score: '+score+' — tap Start'; }
document.getElementById('st').onclick=()=>{ reset(); playing=true; document.getElementById('s').textContent=''; draw(); step(); }
cv.addEventListener('click',()=>{ v=-7; }); addEventListener('keydown',e=>{ if(e.key===' ') v=-7; });
draw();
</script>
<script src="../assets/analytics.js"></script>
</body></html>