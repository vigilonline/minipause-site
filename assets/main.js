// Matching
const Matching=(()=>{const emo=['🤖','🛸','⚙️','🔧','🧠','🛰️','🌟','💡'];let g,s,f=null,l=false,m=0;function click(el){if(l||el.classList.contains('rev')||el.classList.contains('ok'))return;el.classList.add('rev');if(!f){f=el;return}if(f.dataset.v===el.dataset.v){f.classList.add('ok');el.classList.add('ok');m+=2;f=null;if(m===emo.length*2)s.textContent='All matched! 🎉'}else{l=true;setTimeout(()=>{f.classList.remove('rev');el.classList.remove('rev');f=null;l=false},600)}}function newGame(){g.innerHTML='';s.textContent='';m=0;f=null;l=false;[...emo,...emo].sort(()=>Math.random()-.5).forEach(v=>{const d=document.createElement('button');d.className='card';d.dataset.v=v;d.innerHTML='<span style="opacity:0">'+v+'</span>';d.onclick=()=>{d.firstChild.style.opacity=1;click(d)};g.appendChild(d)});}function init(){g=document.querySelector('#matching');s=document.querySelector('#mstatus');newGame()}return{init,newGame}})();
// Maze
const Maze=(()=>{const W=10,H=10,C=32;let ctx,px=0,py=0,gx=9,gy=9,st;const mz=[[0,0,0,0,0,0,0,0,0,0],[1,1,0,1,1,1,0,1,1,0],[0,0,0,0,0,1,0,0,0,0],[0,1,1,1,0,1,1,1,1,0],[0,0,0,1,0,0,0,0,1,0],[1,1,0,1,1,1,1,0,1,0],[0,0,0,0,0,0,1,0,0,0],[0,1,1,1,1,0,1,1,1,0],[0,0,0,0,0,0,0,0,1,0],[0,1,1,1,1,1,1,0,0,0]];function draw(){const c=document.querySelector('#maze');ctx=c.getContext('2d');ctx.clearRect(0,0,c.width,c.height);for(let y=0;y<H;y++)for(let x=0;x<W;x++){ctx.fillStyle=mz[y][x]?'#94a3b8':'#ffffff';ctx.fillRect(x*C,y*C,C-1,C-1);}ctx.fillStyle='#fde047';ctx.fillRect(gx*C+6,gy*C+6,C-12,C-12);ctx.fillStyle='#22c55e';ctx.beginPath();ctx.arc(px*C+16,py*C+16,12,0,Math.PI*2);ctx.fill()}function mv(dx,dy){const nx=px+dx,ny=py+dy;if(nx<0||ny<0||nx>=W||ny>=H)return;if(mz[ny][nx])return;px=nx;py=ny;draw();if(px===gx&&py===gy)st.textContent='You win! 🎉'}function key(e){const m={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};if(m[e.key]){e.preventDefault();mv(...m[e.key])}}function reset(){px=0;py=0;st.textContent='';draw()}function init(){st=document.querySelector('#zstatus');draw();addEventListener('keydown',key)}return{init,reset}})();
// Whack
const Whack=(()=>{let g,st,t=null,score=0,left=30,ai=-1;function setup(){g=document.querySelector('#whack');st=document.querySelector('#wstatus');g.innerHTML='';for(let i=0;i<9;i++){const d=document.createElement('div');d.className='hole';const b=document.createElement('div');b.className='bot';d.appendChild(b);d.onclick=()=>{if(i===ai){score++;st.textContent='Score: '+score;ai=-1;d.classList.remove('active')}};g.appendChild(d)}}function tick(){if(left<=0){stop();st.textContent='Time! Score: '+score;return}left--;const hs=[...document.querySelectorAll('.hole')];hs.forEach(h=>h.classList.remove('active'));ai=Math.floor(Math.random()*hs.length);hs[ai].classList.add('active')}function start(){stop();setup();score=0;left=30;st.textContent='Score: 0';tick();t=setInterval(tick,1000)}function stop(){if(t){clearInterval(t);t=null}[...document.querySelectorAll('.hole')].forEach(h=>h.classList.remove('active'))}function init(){setup()}return{init,start}})();
// Puzzle
const Puzzle=(()=>{const S=3;let tiles=[],blank=8,st;function render(){const r=document.querySelector('#puzzle');r.innerHTML='';tiles.forEach((n,i)=>{const d=document.createElement('button');d.className='tile'+(n===blank?' blank':'');d.textContent=n===blank?'':(n+1);d.onclick=()=>click(i);r.appendChild(d)})}function nbs(i){const x=i%S,y=(i/S|0),a=[];if(x>0)a.push(i-1);if(x<S-1)a.push(i+1);if(y>0)a.push(i-S);if(y<S-1)a.push(i+S);return a}function click(i){const bi=tiles.indexOf(blank);if(nbs(bi).includes(i)){[tiles[i],tiles[bi]]=[tiles[bi],tiles[i]];render();check()}}function check(){if(tiles.every((v,i)=>v===i))st.textContent='Solved! 🎉'}function shuffle(){tiles=[...Array(S*S).keys()];blank=tiles.length-1;for(let k=0;k<200;k++){const bi=tiles.indexOf(blank);const a=nbs(bi);const p=a[Math.floor(Math.random()*a.length)];[tiles[p],tiles[bi]]=[tiles[bi],tiles[p]]}st.textContent='';render()}function init(){st=document.querySelector('#pstatus');shuffle()}return{init,shuffle}})();
// init
addEventListener('DOMContentLoaded',()=>{Matching.init();Maze.init();Whack.init();Puzzle.init();});